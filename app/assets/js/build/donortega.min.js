"use strict";console.info("Don Ortega --- BigCommerce");var app=angular.module("bcDonOrtega",["ngAnimate","ngTouch","ui.bootstrap","ui.router"]);app.config(["$stateProvider",function(a){var b=[{name:"store",url:"",templateUrl:"views/category.html"},{name:"category",url:"",templateUrl:"views/category.html"},{name:"product",url:"/product/{productId}",templateUrl:"views/product.html",resolve:{product:function(a,b){return a.getList().then(function(a){return a[b.productId]})}},controller:function(a,b){a.product=b}},{name:"cart",url:"/cart",templateUrl:"views/cart.html"}];b.forEach(function(b){a.state(b)})}]),app.controller("StoreCtrl",["$scope","products",function(a,b){var c=this;c.cartCount=0,c.qtyToAdd=1,sessionStorage.getItem("bigcommerce-cart")?c.cart=JSON.parse(sessionStorage.getItem("bigcommerce-cart")):c.cart=[],b.getList().then(function(a){c.productList=a}),c.qtyDecrease=function(){c.qtyToAdd>1&&c.qtyToAdd--},c.addCart=function(a,b){var d=c.cart.findIndex(function(b){return angular.equals(b.product,a)});d===-1?c.cart.push({product:a,qty:b}):c.cart[d].qty=c.cart[d].qty+b,sessionStorage.setItem("bigcommerce-cart",JSON.stringify(c.cart))}}]),app.service("products",["$http","$q",function(a,b){var c={};return c.getList=function(){var c=b.defer();return sessionStorage.getItem("bigcommerce-productList")||a.get("/assets/json/products.json").then(function(a){sessionStorage.setItem("bigcommerce-productList",JSON.stringify(a.data))},function(a){}),c.resolve(JSON.parse(sessionStorage.getItem("bigcommerce-productList"))),c.promise},c}]);